{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Soy Tea Residue Factory Production Record",
  "type": "object",
  "required": ["batchInfo"],
  "properties": {
    "batchInfo": {
      "type": "object",
      "title": "批次基本資料（廠長建立）",
      "required": ["batchId", "productionType", "productionDate"],
      "properties": {
        "batchId": { "type": "string", "title": "生產批號" },
        "productionType": {
          "type": "string",
          "enum": ["試量產", "正式量產"],
          "title": "生產類型"
        },
        "productionDate": {
          "type": "string",
          "format": "date",
          "title": "生產日期"
        }
      }
    },

    "rawMaterial": {
      "type": "object",
      "title": "原料站（原料人員）",
      "properties": {
        "soySource": { "type": "string", "title": "黃豆來源" },
        "rawBatchNo": { "type": "string", "title": "原料批號" },
        "inputWeightKg": { "type": "number", "title": "入料重量（kg）" },
        "inspectionResult": {
          "type": "string",
          "enum": ["合格", "不合格"],
          "title": "原料檢驗結果"
        }
      }
    },

    "process": {
      "type": "object",
      "title": "製程站（製程人員）",
      "properties": {
        "extractionTemp": { "type": "number", "title": "萃取溫度（℃）" },
        "extractionTime": { "type": "number", "title": "萃取時間（分鐘）" },
        "stirSpeed": { "type": "number", "title": "攪拌轉速（RPM）" }
      }
    },

    "drying": {
      "type": "object",
      "title": "乾燥站（乾燥人員）",
      "properties": {
        "dryTemp": { "type": "number", "title": "乾燥溫度（℃）" },
        "moisture": { "type": "number", "title": "最終含水率（%）" }
      }
    },

    "packaging": {
      "type": "object",
      "title": "包裝站（包裝人員）",
      "properties": {
        "packDate": { "type": "string", "format": "date", "title": "包裝日期" },
        "packer": { "type": "string", "title": "包裝人員" },
        "finalQty": { "type": "number", "title": "成品數量" }
      }
    },

    "qa": {
      "type": "object",
      "title": "品保（QA）",
      "properties": {
        "microTest": { "type": "string", "title": "微生物檢測結果" },
        "finalDecision": {
          "type": "string",
          "enum": ["PASS", "FAIL"],
          "title": "最終判定"
        }
      }
    }
  }
}
